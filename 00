<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UFO í™”ì„± ìš´ì„ í”¼í•˜ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #d4692b 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        #gameContainer {
            position: relative;
            width: 800px;
            height: 600px;
            background: linear-gradient(180deg, #2c1810 0%, #8b4513 30%, #cd853f 100%);
            border: 3px solid #654321;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        #gameCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        #ui {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 20px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            z-index: 10;
        }

        #startScreen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            z-index: 20;
        }

        #startScreen h1 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #FFD700;
        }

        #startScreen p {
            font-size: 18px;
            margin-bottom: 10px;
            line-height: 1.4;
        }

        #startScreen .highlight {
            color: #4CAF50;
            font-weight: bold;
        }

        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            display: none;
            z-index: 20;
        }

        #gameOver h2 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #ff6b6b;
        }

        #gameOver p {
            font-size: 18px;
            margin-bottom: 20px;
        }

        #gameOver .highlight {
            color: #4CAF50;
            font-weight: bold;
        }

        #instructions {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: white;
            font-size: 14px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
            line-height: 1.4;
        }

        @media (max-width: 850px) {
            #gameContainer {
                width: 95vw;
                height: 70vh;
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        <div id="ui">
            <div>ìƒì¡´ ì‹œê°„: <span id="timeDisplay">0</span>ì´ˆ</div>
        </div>
        <div id="instructions">
            ë°©í–¥í‚¤ â† â†’ ë˜ëŠ” í™”ë©´ í„°ì¹˜ë¡œ UFOë¥¼ ì¡°ì¢…í•˜ì„¸ìš”<br>
            ìŠ¤í˜ì´ìŠ¤ë°” ë˜ëŠ” í„°ì¹˜ë¡œ ì í”„í•˜ì„¸ìš”
        </div>
        <div id="startScreen">
            <h1>ğŸ›¸ UFO í™”ì„± ìš´ì„ í”¼í•˜ê¸° ğŸ›¸</h1>
            <p>í•˜ëŠ˜ì—ì„œ ë–¨ì–´ì§€ëŠ” ìš´ì„ì„ í”¼í•˜ë©° ìƒì¡´í•˜ì„¸ìš”!</p>
            <p>â† â†’ ë°©í–¥í‚¤ ë˜ëŠ” í„°ì¹˜ë¡œ UFOë¥¼ ì¢Œìš°ë¡œ ì›€ì§ì´ì„¸ìš”</p>
            <p>ìŠ¤í˜ì´ìŠ¤ë°” ë˜ëŠ” í„°ì¹˜ë¡œ UFOë¥¼ ì í”„ì‹œí‚¤ì„¸ìš”</p>
            <p class="highlight">ìŠ¤í˜ì´ìŠ¤ë°”ë¥¼ ëˆŒëŸ¬ ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”!</p>
        </div>
        <div id="gameOver">
            <h2>ê²Œì„ ì˜¤ë²„!</h2>
            <p>ìƒì¡´ ì‹œê°„: <span id="finalTime">0</span>ì´ˆ</p>
            <p class="highlight">ìŠ¤í˜ì´ìŠ¤ë°”ë¥¼ ëˆŒëŸ¬ ë‹¤ì‹œ ì‹œì‘í•˜ì„¸ìš”!</p>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const timeDisplay = document.getElementById('timeDisplay');
        const startScreen = document.getElementById('startScreen');
        const gameOverDiv = document.getElementById('gameOver');
        const finalTimeSpan = document.getElementById('finalTime');

        // ìº”ë²„ìŠ¤ í¬ê¸° ì„¤ì •
        function resizeCanvas() {
            const container = document.getElementById('gameContainer');
            canvas.width = container.offsetWidth;
            canvas.height = container.offsetHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // ê²Œì„ ìƒíƒœ
        let gameState = 'start'; // 'start', 'playing', 'gameOver'
        let gameRunning = false;
        let startTime = 0;

        // UFO ê°ì²´
        const ufo = {
            x: 0,
            y: 0,
            width: 50,
            height: 30,
            speed: 6,
            velocityY: 0,
            jumpPower: -12,
            gravity: 0.5,
            groundY: 0,
            isGrounded: true
        };

        // ìš´ì„ ë°°ì—´
        const meteors = [];
        let meteorSpawnTimer = 0;

        // í‚¤ ì…ë ¥ ìƒíƒœ
        const keys = {};

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            
            if (e.key === ' ') {
                e.preventDefault();
                if (gameState === 'start') {
                    startGame();
                } else if (gameState === 'gameOver') {
                    restartGame();
                } else if (gameState === 'playing') {
                    // UFO ì í”„
                    if (ufo.isGrounded) {
                        ufo.velocityY = ufo.jumpPower;
                        ufo.isGrounded = false;
                    }
                }
            }
        });

        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        // í„°ì¹˜ ì´ë²¤íŠ¸
        let touchStartX = 0;
        let touchActive = false;

        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            touchStartX = e.touches[0].clientX;
            touchActive = true;
            
            // ê²Œì„ ì‹œì‘/ì¬ì‹œì‘
            if (gameState === 'start') {
                startGame();
            } else if (gameState === 'gameOver') {
                restartGame();
            } else if (gameState === 'playing') {
                // UFO ì í”„
                if (ufo.isGrounded) {
                    ufo.velocityY = ufo.jumpPower;
                    ufo.isGrounded = false;
                }
            }
        });

        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            if (!touchActive || gameState !== 'playing') return;
            
            const touchCurrentX = e.touches[0].clientX;
            const deltaX = touchCurrentX - touchStartX;
            
            if (deltaX > 10) {
                keys['ArrowRight'] = true;
                keys['ArrowLeft'] = false;
            } else if (deltaX < -10) {
                keys['ArrowLeft'] = true;
                keys['ArrowRight'] = false;
            } else {
                keys['ArrowLeft'] = false;
                keys['ArrowRight'] = false;
            }
        });

        canvas.addEventListener('touchend', (e) => {
            e.preventDefault();
            keys['ArrowLeft'] = false;
            keys['ArrowRight'] = false;
            touchActive = false;
        });

        // ê²Œì„ ì‹œì‘
        function startGame() {
            gameState = 'playing';
            gameRunning = true;
            startTime = Date.now();
            
            // UFO ì´ˆê¸° ìœ„ì¹˜
            ufo.x = canvas.width / 2 - ufo.width / 2;
            ufo.y = canvas.height - 100;
            ufo.velocityY = 0;
            ufo.groundY = canvas.height - 100;
            ufo.isGrounded = true;
            
            // ë°°ì—´ ì´ˆê¸°í™”
            meteors.length = 0;
            meteorSpawnTimer = 0;
            
            // UI ì—…ë°ì´íŠ¸
            startScreen.style.display = 'none';
            gameOverDiv.style.display = 'none';
            timeDisplay.textContent = '0';
            
            gameLoop();
        }

        // ê²Œì„ ì¬ì‹œì‘
        function restartGame() {
            startGame();
        }

        // UFO ê·¸ë¦¬ê¸°
        function drawUFO() {
            ctx.save();
            ctx.translate(ufo.x + ufo.width/2, ufo.y + ufo.height/2);
            
            // UFO ëª¸ì²´
            ctx.fillStyle = '#C0C0C0';
            ctx.beginPath();
            ctx.ellipse(0, 0, ufo.width/2, ufo.height/2, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // UFO ë”
            ctx.fillStyle = '#87CEEB';
            ctx.beginPath();
            ctx.ellipse(0, -8, ufo.width/3, ufo.height/3, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // UFO ì¡°ëª…
            ctx.fillStyle = '#FFD700';
            ctx.beginPath();
            ctx.ellipse(-15, 5, 3, 3, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.ellipse(0, 5, 3, 3, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.ellipse(15, 5, 3, 3, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // UFO ë¹› íš¨ê³¼
            ctx.fillStyle = 'rgba(255, 215, 0, 0.3)';
            ctx.beginPath();
            ctx.ellipse(0, 15, 25, 10, 0, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.restore();
        }

        // ìš´ì„ ê·¸ë¦¬ê¸°
        function drawMeteor(meteor) {
            ctx.save();
            ctx.translate(meteor.x + meteor.width/2, meteor.y + meteor.height/2);
            ctx.rotate(meteor.rotation);
            
            // ìš´ì„ ëª¸ì²´
            ctx.fillStyle = '#696969';
            ctx.beginPath();
            ctx.ellipse(0, 0, meteor.width/2, meteor.height/2, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // ìš´ì„ í…ìŠ¤ì²˜
            ctx.fillStyle = '#2F4F4F';
            ctx.beginPath();
            ctx.ellipse(-5, -3, 3, 2, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.ellipse(4, 2, 2, 3, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // ë¶ˆê½ƒ íš¨ê³¼
            ctx.fillStyle = '#FF4500';
            ctx.beginPath();
            ctx.ellipse(0, meteor.height/2 + 8, 6, 12, 0, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#FFD700';
            ctx.beginPath();
            ctx.ellipse(0, meteor.height/2 + 5, 3, 6, 0, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.restore();
        }

        // ë°°ê²½ ê·¸ë¦¬ê¸°
        function drawBackground() {
            // í•˜ëŠ˜ ê·¸ë¼ë°ì´ì…˜
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#1a1a2e');
            gradient.addColorStop(0.3, '#16213e');
            gradient.addColorStop(0.7, '#d4692b');
            gradient.addColorStop(1, '#cd853f');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // ë³„ë“¤
            ctx.fillStyle = 'white';
            for (let i = 0; i < 50; i++) {
                const x = (i * 37) % canvas.width;
                const y = (i * 41) % (canvas.height * 0.6);
                const size = Math.random() * 2;
                ctx.fillRect(x, y, size, size);
            }

            // í™”ì„± ì§€ë©´
            ctx.fillStyle = '#CD853F';
            ctx.fillRect(0, canvas.height - 50, canvas.width, 50);
            
            // ì§€ë©´ í…ìŠ¤ì²˜
            ctx.fillStyle = '#8B4513';
            for (let i = 0; i < canvas.width; i += 25) {
                ctx.fillRect(i, canvas.height - 45, 12, 5);
                ctx.fillRect(i + 7, canvas.height - 35, 8, 3);
            }
        }

        // ì¶©ëŒ ê°ì§€
        function checkCollision(obj1, obj2) {
            return obj1.x < obj2.x + obj2.width &&
                   obj1.x + obj1.width > obj2.x &&
                   obj1.y < obj2.y + obj2.height &&
                   obj1.y + obj1.height > obj2.y;
        }

        // ìš´ì„ ìƒì„±
        function spawnMeteor() {
            const meteor = {
                x: Math.random() * (canvas.width - 30),
                y: -50,
                width: 20 + Math.random() * 20,
                height: 20 + Math.random() * 20,
                speed: 1 + Math.random() * 2, // í™”ì„±ì˜ ë‚®ì€ ì¤‘ë ¥ìœ¼ë¡œ ì²œì²œíˆ
                rotation: Math.random() * Math.PI * 2,
                rotationSpeed: (Math.random() - 0.5) * 0.05
            };
            meteors.push(meteor);
        }

        // ê²Œì„ ì—…ë°ì´íŠ¸
        function update() {
            if (!gameRunning) return;

            // UFO ì¢Œìš° ì´ë™
            if (keys['ArrowLeft']) {
                ufo.x -= ufo.speed;
            }
            if (keys['ArrowRight']) {
                ufo.x += ufo.speed;
            }

            // UFO ìˆ˜ì§ ì´ë™ (ì¤‘ë ¥ê³¼ ì í”„)
            ufo.velocityY += ufo.gravity;
            ufo.y += ufo.velocityY;

            // í™”ë©´ ê²½ê³„ ì²˜ë¦¬
            if (ufo.x < 0) ufo.x = 0;
            if (ufo.x > canvas.width - ufo.width) ufo.x = canvas.width - ufo.width;

            // ì§€ë©´ ì¶©ëŒ ì²˜ë¦¬
            if (ufo.y >= ufo.groundY) {
                ufo.y = ufo.groundY;
                ufo.velocityY = 0;
                ufo.isGrounded = true;
            }

            // ì²œì¥ ì²˜ë¦¬
            if (ufo.y < 0) {
                ufo.y = 0;
                ufo.velocityY = 0;
            }

            // ìš´ì„ ìƒì„± (í™”ì„±ì˜ ë‚®ì€ ì¤‘ë ¥ìœ¼ë¡œ ì ê²Œ ìƒì„±)
            meteorSpawnTimer++;
            if (meteorSpawnTimer > 80) { // ë” ëŠë¦° ì£¼ê¸°ë¡œ ìƒì„±
                spawnMeteor();
                meteorSpawnTimer = 0;
            }

            // ìš´ì„ ì—…ë°ì´íŠ¸
            for (let i = meteors.length - 1; i >= 0; i--) {
                const meteor = meteors[i];
                meteor.y += meteor.speed;
                meteor.rotation += meteor.rotationSpeed;

                // í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°„ ìš´ì„ ì œê±°
                if (meteor.y > canvas.height) {
                    meteors.splice(i, 1);
                    continue;
                }

                // ì¶©ëŒ ê°ì§€
                if (checkCollision(ufo, meteor)) {
                    gameRunning = false;
                    gameState = 'gameOver';
                    const survivedTime = Math.floor((Date.now() - startTime) / 1000);
                    finalTimeSpan.textContent = survivedTime;
                    gameOverDiv.style.display = 'block';
                    return;
                }
            }

            // ì‹œê°„ ì—…ë°ì´íŠ¸
            const currentTime = Math.floor((Date.now() - startTime) / 1000);
            timeDisplay.textContent = currentTime;
        }

        // ê²Œì„ ë Œë”ë§
        function render() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            drawBackground();
            
            if (gameState === 'playing') {
                // ìš´ì„ ê·¸ë¦¬ê¸°
                meteors.forEach(drawMeteor);
                
                // UFO ê·¸ë¦¬ê¸°
                drawUFO();
            }
        }

        // ê²Œì„ ë£¨í”„
        function gameLoop() {
            if (gameState === 'playing') {
                update();
                render();
                requestAnimationFrame(gameLoop);
            }
        }

        // ì´ˆê¸° ë Œë”ë§
        render();
    </script>
</body>
</html>
